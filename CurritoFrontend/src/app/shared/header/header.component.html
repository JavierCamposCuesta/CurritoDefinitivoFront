<!-- Barra de navegación -->
<header class="w-100 fixed-top " style="background-color: navy; z-index: 3;">
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a href="#" class="text-white navbar-brand">
          <h1 class="d-none d-sm-block d-md-block d-lg-block">Currito'S</h1>
        </a>

          <app-search  class="w-100 d-block d-sm-none d-md-none d-lg-none"></app-search>
          <app-search  class="w-75 d-none d-sm-block d-md-block d-lg-none"></app-search>
          <app-search  class="w-50 d-none d-lg-block d-xl-none"></app-search>
          <app-search  class="w-50 d-none d-lg-none d-xl-block"></app-search>
  
          <ul class="d-none d-sm-none d-md-none d-lg-flex me-auto mb-2 mb-lg-0 w-50 justify-content-evenly">
            <li class="nav-item d-flex">
              <i
                class="bi bi-plus-circle"
                style="color: white; font-size: 1.5em"
              ></i>
              <a class="nav-link text-white" aria-current="page" [routerLink]="['profile/addCurrito']">
                <h5>Nuevo Currito</h5>
              </a>
            </li>
            <li class="nav-item d-flex d-md-none d-lg-none d-xl-flex">

              <!-- Cambiamos el icono segun el numero de notificaciones -->
              <i *ngIf="listaNotificaciones.length == 0" 
                class="bi bi-chat-dots"
                style="color: white; font-size: 1.5em; z-index: 2;" 
              ></i>
              <i *ngIf="listaNotificaciones.length != 0" 
                class="bi bi-chat-dots"
                style="color: white; font-size: 1.5em; z-index: 2;"   pBadge value="{{listaNotificaciones.length}}" severity="danger"
              ></i>
              <!-- <a class="nav-link text-white" aria-current="page" [routerLink]="['messages']">
                <h5  pBadge value="2" severity="danger">Notificaciones</h5>
              </a> -->
              <div id="navbarNavDropdown">
                <ul class="navbar-nav">
                  <li class="nav-item dropdown rounded-3" style="background-color: navy;">
                    
                    <a class="nav-link text-white" aria-current="page" role="button" data-bs-toggle="dropdown" aria-expanded="false" >
                      <h5>Notificaciones</h5>
                    </a>
                    <div  class="dropdown-menu dropdown-menu rounded-3 shadow bg-body" aria-labelledby="navbarDropdownMenuLink" style="margin-left: -11vw;border: 1px solid lightblue;">
                      <div  class="row row-cols-lg-8 row-cols-xl-8 p-2" style="width: 30vw;"> 
                        <h5 *ngIf="listaNotificaciones.length == 0">No tienes notificaciones</h5>
                        <div *ngFor="let notificacion of this.listaNotificaciones | slice:0:5" class="col col-lg-12 col-xl-12 p-2 pb-1 navy ms-4">
                          <a [routerLink]="['profile/notification']" style="text-decoration: none;">
                            <h5>Evalua a {{notificacion.usuarioComentado?.nombre}} como ofertante del trabajo que realizastes</h5>

                          </a>
                          
                          
                        </div>
                        <a class="pt-4 text-center" *ngIf="listaNotificaciones.length > 5" [routerLink]="['profile/notification']" style="text-decoration: none;">Ver más</a>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </li>
            <li class="nav-item d-flex">
              <i *ngIf="usuarioRegistrado.nombre == ''"
                class="bi bi-person-circle"
                style="color: white; font-size: 1.5em"
              ></i>
              <span *ngIf="usuarioRegistrado.nombre != ''">
                <img *ngIf="this.usuarioRegistrado.fotoPerfil" class="img-fluid rounded-circle p-1" style="width: 50px; height: 50px; margin-top: -3px;" src={{getImage(this.usuarioRegistrado.fotoPerfil!)}} draggable="false">
                <img *ngIf="!this.usuarioRegistrado.fotoPerfil" class="img-fluid rounded-circle p-1" style="width: 50px; height: 50px; margin-top: -3px; filter: contrast(0%) brightness(300%) ;" src="../../../assets/img/profileDefault.png" draggable="false">
              </span>
              <a *ngIf="usuarioRegistrado.nombre != ''" class="nav-link text-white" aria-current="page" [routerLink]="['/profile/my-profile']">
                <!-- Cuando el usuario está logueado mostramos su nombre y la primera letra de su apellido en mayúsculas, en vez de mi perfil -->
                <h5>{{usuarioRegistrado.nombre?.charAt(0)?.toUpperCase()}}{{usuarioRegistrado.nombre?.slice(1)}} {{usuarioRegistrado.apellidos?.charAt(0)?.toUpperCase()}}</h5>
              </a>
              <a *ngIf="usuarioRegistrado.nombre == ''" class="nav-link text-white" aria-current="page" [routerLink]="['/profile/my-profile']">
                <h5>Mi perfil</h5>
              </a>
            </li>
          </ul>
        </div>
      
    </nav>
  </header>
